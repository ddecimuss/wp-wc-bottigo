# Кастомизация фильтров WooCommerce для BOTTIGO

## Описание

Данная кастомизация изменяет поведение виджета фильтров WooCommerce `woocommerce/product-filters` с автоматического обновления на обновление по кнопке Submit.

## Что изменено

### 1. functions.php
- Добавлен хук для подключения кастомного JavaScript
- Добавлены инлайн стили для кнопки фильтров
- Добавлен JavaScript для отключения автоматической навигации
- Добавлен JavaScript для создания кнопки Submit

### 2. style.css
- Добавлены стили для кнопки "Применить фильтры"
- Добавлены стили состояния загрузки
- Добавлены улучшения для мобильных устройств
- Добавлены стили для лучшего UX фильтров

### 3. js/filters-custom.js (новый файл)
- Класс BottigoFilters для управления фильтрами
- Отключение автоматического обновления
- Сбор данных фильтров
- Построение URL с параметрами
- Обработка состояния загрузки

## Как работает

1. **Отключение автообновления**: Удаляются атрибуты `data-wp-on--*` у элементов фильтров
2. **Добавление кнопки**: Динамически создается кнопка "Применить фильтры"
3. **Сбор данных**: При клике собираются все выбранные значения фильтров
4. **Навигация**: Происходит переход на URL с параметрами фильтров

## Поддерживаемые фильтры

- ✅ Фильтр по цене (ползунок)
- ✅ Фильтры по атрибутам (чекбоксы)
- ✅ Множественный выбор
- ✅ Категории товаров

## Совместимость

- **Тема**: Storefront и дочерние темы
- **WooCommerce**: Версии с блоками фильтров
- **WordPress**: 6.0+
- **Браузеры**: Все современные браузеры

## Установка

Файлы уже добавлены в дочернюю тему. Кастомизация активируется автоматически на страницах:
- Магазин (`is_shop()`)
- Категории товаров (`is_product_category()`)
- Теги товаров (`is_product_tag()`)

## Тестирование

1. Перейдите на страницу магазина
2. Откройте фильтры товаров (кнопка "Фильтрация товаров")
3. Выберите несколько фильтров
4. Убедитесь, что товары НЕ обновляются автоматически
5. Нажмите "Применить фильтры"
6. Проверьте корректность фильтрации

## Возможные проблемы

### Фильтры все еще обновляются автоматически
- Проверьте, что JavaScript загружается без ошибок
- Убедитесь, что используется блок `woocommerce/product-filters`
- Проверьте консоль браузера на ошибки

### Кнопка не появляется
- Убедитесь, что фильтры загружены полностью
- Проверьте, что селектор `.wc-block-product-filters__overlay-content` существует
- Очистите кеш браузера и плагинов

### Стили не применяются
- Проверьте, что CSS загружается
- Убедитесь, что нет конфликтов с другими стилями
- Проверьте специфичность CSS селекторов

## Кастомизация

### Изменение текста кнопки
В `functions.php` найдите:
```javascript
submitButton.textContent = 'Применить фильтры';
```

### Изменение стилей кнопки
В `style.css` найдите класс `.bottigo-filters-submit`

### Добавление новых типов фильтров
В `js/filters-custom.js` дополните метод `collectFilterData()`

## Поддержка

Для вопросов и проблем обращайтесь к разработчику темы.